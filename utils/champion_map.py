# Japanese to English Champion Name Mapping
# Includes official names, common variations, and nicknames.

CHAMPION_MAP = {
    # A
    'aatrox': 'Aatrox', 'エイトロックス': 'Aatrox', 'エイトロ': 'Aatrox',
    'ahri': 'Ahri', 'アーリ': 'Ahri', '狐': 'Ahri',
    'akali': 'Akali', 'アカリ': 'Akali',
    'akshan': 'Akshan', 'アクシャン': 'Akshan',
    'alistar': 'Alistar', 'アリスター': 'Alistar', '牛': 'Alistar',
    'amumu': 'Amumu', 'アムム': 'Amumu',
    'anivia': 'Anivia', 'アニビア': 'Anivia', '鳥': 'Anivia',
    'annie': 'Annie', 'アニー': 'Annie',
    'aphelios': 'Aphelios', 'アフェリオス': 'Aphelios', 'アフェ': 'Aphelios',
    'ashe': 'Ashe', 'アッシュ': 'Ashe',
    'aurelion sol': 'AurelionSol', 'aurelionsol': 'AurelionSol', 'オレリオン・ソル': 'AurelionSol', 'オレソル': 'AurelionSol', 'asol': 'AurelionSol',
    'aurora': 'Aurora', 'オーロラ': 'Aurora',
    'azir': 'Azir', 'アジール': 'Azir', '鳩': 'Azir',

    # B
    'bard': 'Bard', 'バード': 'Bard',
    'bel\'veth': 'Belveth', 'belveth': 'Belveth', 'ベル＝ヴェス': 'Belveth', 'ベルヴェス': 'Belveth',
    'blitzcrank': 'Blitzcrank', 'ブリッツクランク': 'Blitzcrank', 'ブリッツ': 'Blitzcrank',
    'brand': 'Brand', 'ブランド': 'Brand',
    'braum': 'Braum', 'ブラウム': 'Braum',
    'briar': 'Briar', 'ブライアー': 'Briar',

    # C
    'caitlyn': 'Caitlyn', 'ケイトリン': 'Caitlyn', 'ケイト': 'Caitlyn',
    'camille': 'Camille', 'カミール': 'Camille',
    'cassiopeia': 'Cassiopeia', 'カシオペア': 'Cassiopeia', 'カシオ': 'Cassiopeia',
    'cho\'gath': 'Chogath', 'chogath': 'Chogath', 'チョ＝ガス': 'Chogath', 'チョガス': 'Chogath',
    'corki': 'Corki', 'コーキ': 'Corki',

    # D
    'darius': 'Darius', 'ダリウス': 'Darius',
    'diana': 'Diana', 'ダイアナ': 'Diana',
    'dr. mundo': 'DrMundo', 'drmundo': 'DrMundo', 'ドクター・ムンド': 'DrMundo', 'ムンド': 'DrMundo',
    'draven': 'Draven', 'ドレイヴン': 'Draven', 'ドレイブン': 'Draven',

    # E
    'ekko': 'Ekko', 'エコー': 'Ekko',
    'elise': 'Elise', 'エリス': 'Elise',
    'evelynn': 'Evelynn', 'イブリン': 'Evelynn',
    'ezreal': 'Ezreal', 'エズリアル': 'Ezreal', 'エズ': 'Ezreal',

    # F
    'fiddlesticks': 'Fiddlesticks', 'フィドルスティックス': 'Fiddlesticks', 'フィドル': 'Fiddlesticks',
    'fiora': 'Fiora', 'フィオラ': 'Fiora',
    'fizz': 'Fizz', 'フィズ': 'Fizz',

    # G
    'galio': 'Galio', 'ガリオ': 'Galio',
    'gangplank': 'Gangplank', 'ガングプランク': 'Gangplank', 'GP': 'Gangplank',
    'garen': 'Garen', 'ガレン': 'Garen',
    'gnar': 'Gnar', 'ナー': 'Gnar',
    'gragas': 'Gragas', 'グラガス': 'Gragas',
    'graves': 'Graves', 'グレイブス': 'Graves', 'おじさん': 'Graves',
    'gwen': 'Gwen', 'グウェン': 'Gwen',

    # H
    'hecarim': 'Hecarim', 'ヘカリム': 'Hecarim', '馬': 'Hecarim',
    'heimerdinger': 'Heimerdinger', 'ハイマーディンガー': 'Heimerdinger', 'ハイマー': 'Heimerdinger',
    'hwei': 'Hwei', 'フェイ': 'Hwei',

    # I
    'illaoi': 'Illaoi', 'イラオイ': 'Illaoi',
    'irelia': 'Irelia', 'イレリア': 'Irelia',
    'ivern': 'Ivern', 'アイバーン': 'Ivern',

    # J
    'janna': 'Janna', 'ジャンナ': 'Janna',
    'jarvan iv': 'JarvanIV', 'jarvaniv': 'JarvanIV', 'ジャーヴァンIV': 'JarvanIV', 'ジャーヴァン': 'JarvanIV', 'j4': 'JarvanIV',
    'jax': 'Jax', 'ジャックス': 'Jax',
    'jayce': 'Jayce', 'ジェイス': 'Jayce',
    'jhin': 'Jhin', 'ジン': 'Jhin',
    'jinx': 'Jinx', 'ジンクス': 'Jinx',

    # K
    'k\'sante': 'KSante', 'ksante': 'KSante', 'カ・サンテ': 'KSante', 'カサンテ': 'KSante',
    'kai\'sa': 'Kaisa', 'kaisa': 'Kaisa', 'カイ＝サ': 'Kaisa', 'カイサ': 'Kaisa',
    'kalista': 'Kalista', 'カリスタ': 'Kalista',
    'karma': 'Karma', 'カルマ': 'Karma',
    'karthus': 'Karthus', 'カーサス': 'Karthus',
    'kassadin': 'Kassadin', 'カサディン': 'Kassadin',
    'katarina': 'Katarina', 'カタリナ': 'Katarina',
    'kayle': 'Kayle', 'ケイル': 'Kayle',
    'kayn': 'Kayn', 'ケイン': 'Kayn',
    'kennen': 'Kennen', 'ケネン': 'Kennen',
    'kha\'zix': 'Khazix', 'khazix': 'Khazix', 'カ＝ジックス': 'Khazix', 'カジックス': 'Khazix',
    'kindred': 'Kindred', 'キンドレッド': 'Kindred', 'キンド': 'Kindred',
    'kled': 'Kled', 'クレッド': 'Kled',
    'kog\'maw': 'KogMaw', 'kogmaw': 'KogMaw', 'コグ＝マウ': 'KogMaw', 'コグマウ': 'KogMaw',

    # L
    'leblanc': 'LeBlanc', 'ルブラン': 'LeBlanc',
    'lee sin': 'LeeSin', 'leesin': 'LeeSin', 'リー・シン': 'LeeSin', 'リーシン': 'LeeSin', 'リー': 'LeeSin',
    'leona': 'Leona', 'レオナ': 'Leona',
    'lillia': 'Lillia', 'リリア': 'Lillia',
    'lissandra': 'Lissandra', 'リサンドラ': 'Lissandra',
    'lucian': 'Lucian', 'ルシアン': 'Lucian',
    'lulu': 'Lulu', 'ルル': 'Lulu',
    'lux': 'Lux', 'ラックス': 'Lux',

    # M
    'malphite': 'Malphite', 'マルファイト': 'Malphite', '岩': 'Malphite',
    'malzahar': 'Malzahar', 'マルザハール': 'Malzahar', 'マルザ': 'Malzahar',
    'maokai': 'Maokai', 'マオカイ': 'Maokai',
    'master yi': 'MasterYi', 'masteryi': 'MasterYi', 'マスター・イー': 'MasterYi', 'マスターイー': 'MasterYi', 'yi': 'MasterYi',
    'milio': 'Milio', 'ミリオ': 'Milio',
    'miss fortune': 'MissFortune', 'missfortune': 'MissFortune', 'ミス・フォーチュン': 'MissFortune', 'MF': 'MissFortune',
    'mordekaiser': 'Mordekaiser', 'モルデカイザー': 'Mordekaiser', 'モルデ': 'Mordekaiser',
    'morgana': 'Morgana', 'モルガナ': 'Morgana',

    # N
    'naafiri': 'Naafiri', 'ナフィーリ': 'Naafiri', '犬': 'Naafiri',
    'nami': 'Nami', 'ナミ': 'Nami',
    'nasus': 'Nasus', 'ナサス': 'Nasus',
    'nautilus': 'Nautilus', 'ノーチラス': 'Nautilus', 'ノーチ': 'Nautilus',
    'neeko': 'Neeko', 'ニーコ': 'Neeko',
    'nidalee': 'Nidalee', 'ニダリー': 'Nidalee',
    'nilah': 'Nilah', 'ニーラ': 'Nilah',
    'nocturne': 'Nocturne', 'ノクターン': 'Nocturne',
    'nunu & willump': 'Nunu', 'nunu': 'Nunu', 'ヌヌ＆ウィルンプ': 'Nunu', 'ヌヌ': 'Nunu',

    # O
    'olaf': 'Olaf', 'オラフ': 'Olaf',
    'orianna': 'Orianna', 'オリアナ': 'Orianna',
    'ornn': 'Ornn', 'オーン': 'Ornn',

    # P
    'pantheon': 'Pantheon', 'パンテオン': 'Pantheon', 'パンテ': 'Pantheon',
    'poppy': 'Poppy', 'ポッピー': 'Poppy',
    'pyke': 'Pyke', 'パイク': 'Pyke',

    # Q
    'qiyana': 'Qiyana', 'キヤナ': 'Qiyana',
    'quinn': 'Quinn', 'クイン': 'Quinn',

    # R
    'rakan': 'Rakan', 'ラカン': 'Rakan',
    'rammus': 'Rammus', 'ラムス': 'Rammus',
    'rek\'sai': 'RekSai', 'reksai': 'RekSai', 'レク＝サイ': 'RekSai', 'レクサイ': 'RekSai',
    'rell': 'Rell', 'レル': 'Rell',
    'renata glasc': 'RenataGlasc', 'renata': 'RenataGlasc', 'レナータ・グラスク': 'RenataGlasc', 'レナータ': 'RenataGlasc',
    'renekton': 'Renekton', 'レネクトン': 'Renekton', 'ワニ': 'Renekton',
    'rengar': 'Rengar', 'レンガー': 'Rengar',
    'riven': 'Riven', 'リヴェン': 'Riven', 'リベン': 'Riven',
    'rumble': 'Rumble', 'ランブル': 'Rumble',
    'ryze': 'Ryze', 'ライズ': 'Ryze',

    # S
    'samira': 'Samira', 'サミーラ': 'Samira',
    'sejuani': 'Sejuani', 'セジュアニ': 'Sejuani', 'セジュ': 'Sejuani',
    'senna': 'Senna', 'セナ': 'Senna',
    'seraphine': 'Seraphine', 'セラフィーン': 'Seraphine',
    'sett': 'Sett', 'セト': 'Sett',
    'shaco': 'Shaco', 'シャコ': 'Shaco',
    'shen': 'Shen', 'シェン': 'Shen',
    'shyvana': 'Shyvana', 'シヴァーナ': 'Shyvana',
    'singed': 'Singed', 'シンジド': 'Singed',
    'sion': 'Sion', 'サイオン': 'Sion',
    'sivir': 'Sivir', 'シヴィア': 'Sivir', 'シビア': 'Sivir',
    'skarner': 'Skarner', 'スカーナー': 'Skarner',
    'smolder': 'Smolder', 'スモルダー': 'Smolder',
    'sona': 'Sona', 'ソナ': 'Sona',
    'soraka': 'Soraka', 'ソラカ': 'Soraka',
    'swain': 'Swain', 'スウェイン': 'Swain',
    'sylas': 'Sylas', 'サイラス': 'Sylas',
    'syndra': 'Syndra', 'シンドラ': 'Syndra',

    # T
    'tahm kench': 'TahmKench', 'tahmkench': 'TahmKench', 'タム・ケンチ': 'TahmKench', 'タムケン': 'TahmKench',
    'taliyah': 'Taliyah', 'タリヤ': 'Taliyah',
    'talon': 'Talon', 'タロン': 'Talon',
    'taric': 'Taric', 'タリック': 'Taric',
    'teemo': 'Teemo', 'ティーモ': 'Teemo',
    'thresh': 'Thresh', 'スレッシュ': 'Thresh',
    'tristana': 'Tristana', 'トリスターナ': 'Tristana',
    'trundle': 'Trundle', 'トランドル': 'Trundle',
    'tryndamere': 'Tryndamere', 'トリンダメア': 'Tryndamere', 'トリン': 'Tryndamere',
    'twisted fate': 'TwistedFate', 'twistedfate': 'TwistedFate', 'ツイステッド・フェイト': 'TwistedFate', 'TF': 'TwistedFate',
    'twitch': 'Twitch', 'トゥイッチ': 'Twitch',

    # U
    'udyr': 'Udyr', 'ウディア': 'Udyr',
    'urgot': 'Urgot', 'アーゴット': 'Urgot',

    # V
    'varus': 'Varus', 'ヴァルス': 'Varus',
    'vayne': 'Vayne', 'ヴェイン': 'Vayne',
    'veigar': 'Veigar', 'ベイガー': 'Veigar',
    'vel\'koz': 'Velkoz', 'velkoz': 'Velkoz', 'ヴェル＝コズ': 'Velkoz', 'ヴェルコズ': 'Velkoz', 'タコ': 'Velkoz',
    'vex': 'Vex', 'ヴェックス': 'Vex',
    'vi': 'Vi', 'ヴァイ': 'Vi',
    'viego': 'Viego', 'ヴィエゴ': 'Viego',
    'viktor': 'Viktor', 'ビクター': 'Viktor',
    'vladimir': 'Vladimir', 'ブラッドミア': 'Vladimir', '吸血鬼': 'Vladimir',
    'volibear': 'Volibear', 'ボリベア': 'Volibear', '熊': 'Volibear',

    # W
    'warwick': 'Warwick', 'ワーウィック': 'Warwick', 'WW': 'Warwick',
    'wukong': 'MonkeyKing', 'ウーコン': 'MonkeyKing', '猿': 'MonkeyKing', # U.GG uses MonkeyKing usually, or Wukong. Let's stick to MonkeyKing if that was the issue, or check. Actually U.GG uses 'wukong' in URL but 'MonkeyKing' in some API. Let's try 'wukong' first, but scraper handles it.
    
    # X
    'xayah': 'Xayah', 'ザヤ': 'Xayah',
    'xerath': 'Xerath', 'ゼラス': 'Xerath',
    'xin zhao': 'XinZhao', 'xinzhao': 'XinZhao', 'シン・ジャオ': 'XinZhao', 'シンジャオ': 'XinZhao',

    # Y
    'yasuo': 'Yasuo', 'ヤスオ': 'Yasuo',
    'yone': 'Yone', 'ヨネ': 'Yone',
    'yorick': 'Yorick', 'ヨリック': 'Yorick',
    'yuumi': 'Yuumi', 'ユーミ': 'Yuumi', '猫': 'Yuumi',

    # Z
    'zac': 'Zac', 'ザック': 'Zac',
    'zed': 'Zed', 'ゼド': 'Zed',
    'zeri': 'Zeri', 'ゼリ': 'Zeri',
    'ziggs': 'Ziggs', 'ジグス': 'Ziggs',
    'zilean': 'Zilean', 'ジリアン': 'Zilean',
    'zoe': 'Zoe', 'ゾーイ': 'Zoe',
    'zyra': 'Zyra', 'ザイラ': 'Zyra',
    
    # New Champion (2024+)
    'zaahen': 'Zaahen', 'ザーヘン': 'Zaahen',
}

def normalize_champion_name(name):
    """
    Normalizes a champion name input to the standard English slug.
    Returns None if no match found.
    """
    # Normalize input: lowercase, remove spaces/punctuation for fuzzy match
    # But our map keys are already somewhat specific.
    # Let's try direct lookup first.
    
    clean_name = name.lower().strip()
    
    if clean_name in CHAMPION_MAP:
        return CHAMPION_MAP[clean_name]
    
    # Try removing spaces/punctuation from input
    clean_name_nospaces = clean_name.replace(' ', '').replace("'", "").replace(".", "")
    if clean_name_nospaces in CHAMPION_MAP:
        return CHAMPION_MAP[clean_name_nospaces]
        
    return None

def extract_champion_name(query):
    """
    Extracts the longest matching champion name from a query string.
    Returns (champion_slug, remaining_query).
    Returns (None, query) if no match found.
    """
    # Sort keys by length descending to match longest names first (e.g. "Lee Sin" before "Lee")
    sorted_keys = sorted(CHAMPION_MAP.keys(), key=len, reverse=True)
    
    query_lower = query.lower()
    
    for key in sorted_keys:
        # Check if key is in query
        # We need to be careful about word boundaries?
        # "Ahri build" -> "ahri" is in it.
        # "Garen stats" -> "garen" is in it.
        
        if key in query_lower:
            # Found a match
            # Remove it from the query to get the intent
            # We replace only the first occurrence?
            # Or we should be careful not to replace "Ahri" in "Ahriana" (not a champ but example)
            
            # Simple replace for now
            remaining = query_lower.replace(key, "", 1).strip()
            return CHAMPION_MAP[key], remaining
            
    return None, query

# Reverse mapping for display
ENGLISH_TO_JAPANESE = {
    'Aatrox': 'エイトロックス',
    'Ahri': 'アーリ',
    'Akali': 'アカリ',
    'Akshan': 'アクシャン',
    'Alistar': 'アリスター',
    'Amumu': 'アムム',
    'Anivia': 'アニビア',
    'Annie': 'アニー',
    'Aphelios': 'アフェリオス',
    'Ashe': 'アッシュ',
    'AurelionSol': 'オレリオン・ソル',
    'Aurora': 'オーロラ',
    'Azir': 'アジール',
    'Bard': 'バード',
    'Belveth': 'ベル＝ヴェス',
    'Blitzcrank': 'ブリッツクランク',
    'Brand': 'ブランド',
    'Braum': 'ブラウム',
    'Briar': 'ブライアー',
    'Caitlyn': 'ケイトリン',
    'Camille': 'カミール',
    'Cassiopeia': 'カシオペア',
    'Chogath': 'チョ＝ガス',
    'Corki': 'コーキ',
    'Darius': 'ダリウス',
    'Diana': 'ダイアナ',
    'DrMundo': 'ドクター・ムンド',
    'Draven': 'ドレイヴン',
    'Ekko': 'エコー',
    'Elise': 'エリス',
    'Evelynn': 'イブリン',
    'Ezreal': 'エズリアル',
    'Fiddlesticks': 'フィドルスティックス',
    'Fiora': 'フィオラ',
    'Fizz': 'フィズ',
    'Galio': 'ガリオ',
    'Gangplank': 'ガングプランク',
    'Garen': 'ガレン',
    'Gnar': 'ナー',
    'Gragas': 'グラガス',
    'Graves': 'グレイブス',
    'Gwen': 'グウェン',
    'Hecarim': 'ヘカリム',
    'Heimerdinger': 'ハイマーディンガー',
    'Hwei': 'フェイ',
    'Illaoi': 'イラオイ',
    'Irelia': 'イレリア',
    'Ivern': 'アイバーン',
    'Janna': 'ジャンナ',
    'JarvanIV': 'ジャーヴァンIV',
    'Jax': 'ジャックス',
    'Jayce': 'ジェイス',
    'Jhin': 'ジン',
    'Jinx': 'ジンクス',
    'KSante': 'カ・サンテ',
    'Kaisa': 'カイ＝サ',
    'Kalista': 'カリスタ',
    'Karma': 'カルマ',
    'Karthus': 'カーサス',
    'Kassadin': 'カサディン',
    'Katarina': 'カタリナ',
    'Kayle': 'ケイル',
    'Kayn': 'ケイン',
    'Kennen': 'ケネン',
    'Khazix': 'カ＝ジックス',
    'Kindred': 'キンドレッド',
    'Kled': 'クレッド',
    'KogMaw': 'コグ＝マウ',
    'LeBlanc': 'ルブラン',
    'LeeSin': 'リー・シン',
    'Leona': 'レオナ',
    'Lillia': 'リリア',
    'Lissandra': 'リサンドラ',
    'Lucian': 'ルシアン',
    'Lulu': 'ルル',
    'Lux': 'ラックス',
    'Malphite': 'マルファイト',
    'Malzahar': 'マルザハール',
    'Maokai': 'マオカイ',
    'MasterYi': 'マスター・イー',
    'Milio': 'ミリオ',
    'MissFortune': 'ミス・フォーチュン',
    'MonkeyKing': 'ウーコン',
    'Mordekaiser': 'モルデカイザー',
    'Morgana': 'モルガナ',
    'Naafiri': 'ナフィーリ',
    'Nami': 'ナミ',
    'Nasus': 'ナサス',
    'Nautilus': 'ノーチラス',
    'Neeko': 'ニーコ',
    'Nidalee': 'ニダリー',
    'Nilah': 'ニーラ',
    'Nocturne': 'ノクターン',
    'Nunu': 'ヌヌ＆ウィルンプ',
    'Olaf': 'オラフ',
    'Orianna': 'オリアナ',
    'Ornn': 'オーン',
    'Pantheon': 'パンテオン',
    'Poppy': 'ポッピー',
    'Pyke': 'パイク',
    'Qiyana': 'キヤナ',
    'Quinn': 'クイン',
    'Rakan': 'ラカン',
    'Rammus': 'ラムス',
    'RekSai': 'レク＝サイ',
    'Rell': 'レル',
    'RenataGlasc': 'レナータ・グラスク',
    'Renekton': 'レネクトン',
    'Rengar': 'レンガー',
    'Riven': 'リヴェン',
    'Rumble': 'ランブル',
    'Ryze': 'ライズ',
    'Samira': 'サミーラ',
    'Sejuani': 'セジュアニ',
    'Senna': 'セナ',
    'Seraphine': 'セラフィーン',
    'Sett': 'セト',
    'Shaco': 'シャコ',
    'Shen': 'シェン',
    'Shyvana': 'シヴァーナ',
    'Singed': 'シンジド',
    'Sion': 'サイオン',
    'Sivir': 'シヴィア',
    'Skarner': 'スカーナー',
    'Smolder': 'スモルダー',
    'Sona': 'ソナ',
    'Soraka': 'ソラカ',
    'Swain': 'スウェイン',
    'Sylas': 'サイラス',
    'Syndra': 'シンドラ',
    'TahmKench': 'タム・ケンチ',
    'Taliyah': 'タリヤ',
    'Talon': 'タロン',
    'Taric': 'タリック',
    'Teemo': 'ティーモ',
    'Thresh': 'スレッシュ',
    'Tristana': 'トリスターナ',
    'Trundle': 'トランドル',
    'Tryndamere': 'トリンダメア',
    'TwistedFate': 'ツイステッド・フェイト',
    'Twitch': 'トゥイッチ',
    'Udyr': 'ウディア',
    'Urgot': 'アーゴット',
    'Varus': 'ヴァルス',
    'Vayne': 'ヴェイン',
    'Veigar': 'ベイガー',
    'Velkoz': 'ヴェル＝コズ',
    'Vex': 'ヴェックス',
    'Vi': 'ヴァイ',
    'Viego': 'ヴィエゴ',
    'Viktor': 'ビクター',
    'Vladimir': 'ブラッドミア',
    'Volibear': 'ボリベア',
    'Warwick': 'ワーウィック',
    'Xayah': 'ザヤ',
    'Xerath': 'ゼラス',
    'XinZhao': 'シン・ジャオ',
    'Yasuo': 'ヤスオ',
    'Yone': 'ヨネ',
    'Yorick': 'ヨリック',
    'Yuumi': 'ユーミ',
    'Zac': 'ザック',
    'Zed': 'ゼド',
    'Zeri': 'ゼリ',
    'Ziggs': 'ジグス',
    'Zilean': 'ジリアン',
    'Zoe': 'ゾーイ',
    'Zyra': 'ザイラ'
}

def get_japanese_name(slug):
    """
    Returns the Japanese name for a champion slug.
    Returns the slug itself if not found.
    """
    return ENGLISH_TO_JAPANESE.get(slug, slug)

def extract_lane(query):
    """
    Extracts lane/role from the query string.
    Returns normalized role ('top', 'middle', 'jungle', 'bottom', 'support') or None.
    """
    query_lower = query.lower()
    
    # Lane keyword mappings
    lane_map = {
        'top': 'top',
        'トップ': 'top',
        
        'mid': 'middle',
        'middle': 'middle',
        'ミッド': 'middle',
        
        'jungle': 'jungle',
        'jg': 'jungle',
        'jgl': 'jungle',
        'ジャングル': 'jungle',
        
        'bot': 'bottom',
        'bottom': 'bottom',
        'adc': 'bottom',
        'ボット': 'bottom',
        
        'support': 'support',
        'sup': 'support',
        'サポート': 'support',
    }
    
    # Check for each keyword
    for keyword, role in lane_map.items():
        if keyword in query_lower:
            return role
    
    return None

def get_all_champions():
    """
    Get a sorted list of all unique champions with their Japanese names.
    Returns: List of tuples (english_name, japanese_name)
    """
    # Get all unique English champion names
    unique_champs = sorted(set(CHAMPION_MAP.values()))
    
    # Create reverse mapping for Japanese names
    jp_map = {}
    for jp_name, en_name in CHAMPION_MAP.items():
        if en_name not in jp_map:
            jp_map[en_name] = jp_name
        # Prefer katakana names over nicknames/variations
        elif len(jp_name) > len(jp_map[en_name]):
            jp_map[en_name] = jp_name
    
    # Return list of (english, japanese) tuples
    result = []
    for en_name in unique_champs:
        jp_name = jp_map.get(en_name, en_name)
        # Find the most appropriate Japanese name (katakana, not nickname)
        for k, v in CHAMPION_MAP.items():
            if v == en_name and k.startswith(('ア', 'イ', 'ウ', 'エ', 'オ', 'カ', 'キ', 'ク', 'ケ', 'コ', 
                                              'サ', 'シ', 'ス', 'セ', 'ソ', 'タ', 'チ', 'ツ', 'テ', 'ト',
                                              'ナ', 'ニ', 'ヌ', 'ネ', 'ノ', 'ハ', 'ヒ', 'フ', 'ヘ', 'ホ',
                                              'マ', 'ミ', 'ム', 'メ', 'モ', 'ヤ', 'ユ', 'ヨ', 'ラ', 'リ',
                                              'ル', 'レ', 'ロ', 'ワ', 'ヲ', 'ン', 'ガ', 'ギ', 'グ', 'ゲ',
                                              'ゴ', 'ザ', 'ジ', 'ズ', 'ゼ', 'ゾ', 'ダ', 'ヂ', 'ヅ', 'デ',
                                              'ド', 'バ', 'ビ', 'ブ', 'ベ', 'ボ', 'パ', 'ピ', 'プ', 'ペ', 'ポ')):
                jp_name = k
                break
        result.append((en_name, jp_name))
    
    return result
